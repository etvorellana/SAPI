<!doctype html>
<html>

<head>
    <title>Flask-Sock Demo</title>
</head>

<body>
    <h1>Flask-Sock Demo</h1>
    <div id="log"></div>
    <br>
    <button id="start-button" type="button">Start!</button>
    <script>
        const log = (text, color) => {
            document.getElementById('log').innerHTML += `<span style="color: ${color}">${text}</span><br>`;
        };

        document.getElementById('start-button').onclick = ev => {
            ev.preventDefault();
            const socket = new WebSocket('ws://' + location.host + '/analysis');
            socket.addEventListener('message', ev => {
                log('<<< ' + ev.data, 'green');
            });
        };
    </script>
</body>

</html>